# Wings ë°ëª¬ ì•„í‚¤í…ì²˜ ë¬¸ì„œ

## ğŸ“‹ ê°œìš”

WingsëŠ” ë§ˆì¸í¬ë˜í”„íŠ¸ íŒ¨ë„ ì‹œìŠ¤í…œì˜ í•µì‹¬ êµ¬ì„±ìš”ì†Œë¡œ, ì‹¤ì œ ë§ˆì¸í¬ë˜í”„íŠ¸ ì„œë²„ë“¤ì„ Docker ì»¨í…Œì´ë„ˆë¡œ ê´€ë¦¬í•˜ëŠ” ë°ëª¬ì…ë‹ˆë‹¤. ë°±ì—”ë“œ Panelê³¼ HTTP API ë° WebSocketì„ í†µí•´ í†µì‹ í•˜ë©°, ì„œë²„ ìƒì„±/ì‚­ì œ/ì œì–´ ë° ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.

### ğŸ¯ ì£¼ìš” ê¸°ëŠ¥
- **Docker ê¸°ë°˜ ì„œë²„ ê´€ë¦¬**: ë§ˆì¸í¬ë˜í”„íŠ¸ ì„œë²„ë¥¼ Docker ì»¨í…Œì´ë„ˆë¡œ ìƒì„±/ì œì–´
- **ì‹¤ì‹œê°„ í†µì‹ **: WebSocketì„ í†µí•œ ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë° ë° ìƒíƒœ ì—…ë°ì´íŠ¸
- **Panel ì—°ë™**: HTTP APIë¥¼ í†µí•œ ë°±ì—”ë“œ Panelê³¼ì˜ í†µì‹ 
- **ìƒíƒœ ë™ê¸°í™”**: ì»¨í…Œì´ë„ˆ ìƒíƒœë¥¼ Panel DBì™€ ì‹¤ì‹œê°„ ë™ê¸°í™”
- **ë¦¬ì†ŒìŠ¤ ê´€ë¦¬**: CPU, ë©”ëª¨ë¦¬, í¬íŠ¸ ë“± ì„œë²„ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬

---

## ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Wings Daemon                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   HTTP API  â”‚  â”‚  WebSocket  â”‚  â”‚ Sync Module â”‚         â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚         â”‚
â”‚  â”‚ - REST      â”‚  â”‚ - Real-time â”‚  â”‚ - Container â”‚         â”‚
â”‚  â”‚   Endpoints â”‚  â”‚   Logs      â”‚  â”‚   Scanning  â”‚         â”‚
â”‚  â”‚ - Server    â”‚  â”‚ - Status    â”‚  â”‚ - Panel     â”‚         â”‚
â”‚  â”‚   Control   â”‚  â”‚   Updates   â”‚  â”‚   Sync      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Docker Service Layer                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Container Management: Create, Start, Stop, Delete      â”‚ â”‚
â”‚  â”‚ Resource Control: CPU, Memory, Port Mapping           â”‚ â”‚
â”‚  â”‚ Log Streaming: Real-time container logs               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Docker Engine                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ MC Server 1 â”‚  â”‚ MC Server 2 â”‚  â”‚ MC Server N â”‚         â”‚
â”‚  â”‚ Container   â”‚  â”‚ Container   â”‚  â”‚ Container   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ë””ë ‰í„°ë¦¬ êµ¬ì¡°

```
app/wings/
â”œâ”€â”€ index.js                      # ë©”ì¸ ì§„ì…ì 
â”œâ”€â”€ package.json                  # ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ .env.example                  # í™˜ê²½ë³€ìˆ˜ ì˜ˆì‹œ
â”œâ”€â”€ server-sync.json              # ë™ê¸°í™” ë°ì´í„° ì €ì¥
â”œâ”€â”€ REFACTOR_SUMMARY.md           # ë¦¬íŒ©í† ë§ ì™„ë£Œ ë³´ê³ ì„œ
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ index.js                  # Express ì„œë²„ ë° WebSocket ì´ˆê¸°í™”
    â”‚
    â”œâ”€â”€ config/
    â”‚   â””â”€â”€ config.js             # ì¤‘ì•™ ì§‘ì¤‘ì‹ í™˜ê²½ì„¤ì • ê´€ë¦¬
    â”‚
    â”œâ”€â”€ controllers/
    â”‚   â””â”€â”€ server.controller.js  # ì„œë²„ ê´€ë¦¬ API ì»¨íŠ¸ë¡¤ëŸ¬
    â”‚
    â”œâ”€â”€ services/
    â”‚   â””â”€â”€ docker.service.js     # Docker ì—”ì§„ ì—°ë™ ì„œë¹„ìŠ¤
    â”‚
    â”œâ”€â”€ routes/
    â”‚   â””â”€â”€ server.routes.js      # API ë¼ìš°íŒ… ì •ì˜
    â”‚
    â”œâ”€â”€ store/
    â”‚   â””â”€â”€ server.store.js       # ë©”ëª¨ë¦¬ ê¸°ë°˜ ì„œë²„ ìƒíƒœ ì €ì¥ì†Œ
    â”‚
    â”œâ”€â”€ websocket/
    â”‚   â””â”€â”€ websocket.js          # WebSocket ì„œë²„ ê´€ë¦¬
    â”‚
    â””â”€â”€ utils/
        â”œâ”€â”€ responseUtils.js      # API ì‘ë‹µ í‘œì¤€í™”
        â”œâ”€â”€ errorUtils.js         # ì—ëŸ¬ ì²˜ë¦¬ ë° ì»¤ìŠ¤í…€ ì—ëŸ¬
        â”œâ”€â”€ loggerUtils.js        # êµ¬ì¡°í™”ëœ ë¡œê¹… ì‹œìŠ¤í…œ
        â”œâ”€â”€ validationUtils.js    # ì…ë ¥ ê²€ì¦ ìœ í‹¸ë¦¬í‹°
        â”œâ”€â”€ serverUtils.js        # ì„œë²„ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
        â””â”€â”€ syncUtils.js          # Panel ë™ê¸°í™” ìœ í‹¸ë¦¬í‹°
```

---

## ğŸ”§ í•µì‹¬ ëª¨ë“ˆ ìƒì„¸

### 1. Main Application (src/index.js)

**ì£¼ìš” ê¸°ëŠ¥**:
- Express ì„œë²„ ì´ˆê¸°í™”
- Docker ë°ëª¬ ì—°ê²° í™•ì¸
- WebSocket ì„œë²„ ì„¤ì •
- ë¼ìš°íŒ… ë° ë¯¸ë“¤ì›¨ì–´ ì„¤ì •

**ì‹œì‘ í”„ë¡œì„¸ìŠ¤**:
```javascript
1. Docker ë°ëª¬ ì—°ê²° í™•ì¸ (pingDocker)
   â†“
2. ì—°ê²° ì‹¤íŒ¨ ì‹œ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
   â†“
3. HTTP ì„œë²„ ìƒì„± ë° WebSocket ì´ˆê¸°í™”
   â†“
4. í¬íŠ¸ 8080ì—ì„œ ì„œë²„ ì‹œì‘
   â†“
5. SIGINT ì‹ í˜¸ ì²˜ë¦¬ (graceful shutdown)
```

### 2. Configuration Management (config/config.js)

**í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜ ì„¤ì •**:
- **ì„œë²„ ì„¤ì •**: í¬íŠ¸, í™˜ê²½
- **Docker ì„¤ì •**: ì´ë¯¸ì§€, ì†Œì¼“ ê²½ë¡œ
- **ë§ˆì¸í¬ë˜í”„íŠ¸ ê¸°ë³¸ê°’**: í¬íŠ¸, ë©”ëª¨ë¦¬, CPU, ë²„ì „
- **ë³´ì•ˆ ì„¤ì •**: í¬íŠ¸ ë²”ìœ„, ì•”í˜¸í™”
- **ê²½ë¡œ ì„¤ì •**: ë°ì´í„° ë§ˆìš´íŠ¸ ê²½ë¡œ

**ì£¼ìš” ì„¤ì •ê°’**:
```javascript
{
  server: { port: 8080 },
  docker: { image: 'itzg/minecraft-server' },
  minecraft: { 
    defaultPort: 25565,
    defaultMemory: '1g',
    supportedTypes: ['VANILLA', 'PAPER', 'SPIGOT', ...]
  }
}
```

### 3. Docker Service (services/docker.service.js)

**ì£¼ìš” ê¸°ëŠ¥**:
- Docker ì»¨í…Œì´ë„ˆ ìƒëª…ì£¼ê¸° ê´€ë¦¬
- ë¦¬ì†ŒìŠ¤ ì œí•œ ì„¤ì • (CPU, ë©”ëª¨ë¦¬)
- í¬íŠ¸ ë§¤í•‘ ë° ë³¼ë¥¨ ë§ˆìš´íŠ¸
- ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°

**í•µì‹¬ ë©”ì„œë“œ**:
```javascript
- pingDocker(): Docker ë°ëª¬ ì—°ê²° í™•ì¸
- createServerContainer(): ìƒˆ ì„œë²„ ì»¨í…Œì´ë„ˆ ìƒì„±
- startContainer(): ì»¨í…Œì´ë„ˆ ì‹œì‘
- stopContainer(): ì»¨í…Œì´ë„ˆ ì¤‘ì§€
- removeContainer(): ì»¨í…Œì´ë„ˆ ì‚­ì œ
- getContainerInfo(): ì»¨í…Œì´ë„ˆ ì •ë³´ ì¡°íšŒ
- streamContainerLogs(): ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°
```

### 4. Server Controller (controllers/server.controller.js)

**API ì—”ë“œí¬ì¸íŠ¸**:
```javascript
GET    /api/v1/servers           # ëª¨ë“  ì„œë²„ ëª©ë¡ ì¡°íšŒ
GET    /api/v1/servers/:id       # íŠ¹ì • ì„œë²„ ì •ë³´ ì¡°íšŒ
POST   /api/v1/servers           # ìƒˆ ì„œë²„ ìƒì„±
DELETE /api/v1/servers/:id       # ì„œë²„ ì‚­ì œ
POST   /api/v1/servers/:id/start # ì„œë²„ ì‹œì‘
POST   /api/v1/servers/:id/stop  # ì„œë²„ ì¤‘ì§€
POST   /api/v1/servers/:id/restart # ì„œë²„ ì¬ì‹œì‘
PUT    /api/v1/servers/:id/resources # ë¦¬ì†ŒìŠ¤ ì—…ë°ì´íŠ¸
POST   /api/v1/servers/:id/command # ëª…ë ¹ì–´ ì „ì†¡
GET    /api/v1/servers/:id/status # ì„œë²„ ìƒíƒœ ì¡°íšŒ
```

**ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬**:
- ì…ë ¥ ê²€ì¦ (í¬íŠ¸, ë©”ëª¨ë¦¬, CPU í˜•ì‹)
- Docker ì„œë¹„ìŠ¤ í˜¸ì¶œ
- í‘œì¤€í™”ëœ ì‘ë‹µ í˜•ì‹ ë°˜í™˜
- ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…

### 5. WebSocket Manager (websocket/websocket.js)

**ì£¼ìš” ê¸°ëŠ¥**:
- ì‹¤ì‹œê°„ ì„œë²„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°
- ì„œë²„ ìƒíƒœ ë³€ê²½ ì•Œë¦¼
- í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ê´€ë¦¬

**WebSocket ì´ë²¤íŠ¸**:
```javascript
- 'server_logs': ì‹¤ì‹œê°„ ì„œë²„ ë¡œê·¸
- 'server_status': ì„œë²„ ìƒíƒœ ë³€ê²½
- 'container_event': Docker ì»¨í…Œì´ë„ˆ ì´ë²¤íŠ¸
```

### 6. Synchronization (utils/syncUtils.js)

**ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤**:
```javascript
1. scanDockerContainers(): Docker ì»¨í…Œì´ë„ˆ ìŠ¤ìº”
   â†“
2. scanServerDirectories(): ì„œë²„ ë””ë ‰í† ë¦¬ ìŠ¤ìº”
   â†“
3. ë™ê¸°í™” ë°ì´í„° ìƒì„± (containers, directories, summary)
   â†“
4. saveSyncData(): ë¡œì»¬ íŒŒì¼ì— ì €ì¥
   â†“
5. sendSyncDataToPanel(): Panel APIë¡œ ì „ì†¡ (TODO)
```

---

## ğŸ”„ ì£¼ìš” ì‘ë™ íë¦„

### 1. ì„œë²„ ìƒì„± íë¦„

```
1. POST /api/v1/servers ìš”ì²­ ìˆ˜ì‹ 
   â†“
2. ì…ë ¥ ê²€ì¦ (í¬íŠ¸, ë©”ëª¨ë¦¬, CPU, ì„œë²„ íƒ€ì…)
   â†“
3. í¬íŠ¸ ì¶©ëŒ í™•ì¸
   â†“
4. Docker ì»¨í…Œì´ë„ˆ ìƒì„±
   - ì´ë¯¸ì§€: itzg/minecraft-server
   - í™˜ê²½ë³€ìˆ˜: EULA, TYPE, VERSION ë“±
   - í¬íŠ¸ ë§¤í•‘: ê²Œì„ í¬íŠ¸, RCON í¬íŠ¸
   - ë³¼ë¥¨ ë§ˆìš´íŠ¸: ì„œë²„ ë°ì´í„° ë””ë ‰í† ë¦¬
   â†“
5. ì„œë²„ ì •ë³´ë¥¼ ë©”ëª¨ë¦¬ ìŠ¤í† ì–´ì— ì €ì¥
   â†“
6. ì„±ê³µ ì‘ë‹µ ë°˜í™˜ (201 Created)
```

### 2. ì„œë²„ ì œì–´ íë¦„

```
1. POST /api/v1/servers/:id/start ìš”ì²­
   â†“
2. ì„œë²„ ì¡´ì¬ í™•ì¸ (ë©”ëª¨ë¦¬ ìŠ¤í† ì–´)
   â†“
3. Docker ì»¨í…Œì´ë„ˆ ì‹œì‘
   â†“
4. ìƒíƒœ ì—…ë°ì´íŠ¸ (running)
   â†“
5. WebSocketìœ¼ë¡œ ìƒíƒœ ë³€ê²½ ë¸Œë¡œë“œìºìŠ¤íŠ¸
   â†“
6. ì„±ê³µ ì‘ë‹µ ë°˜í™˜
```

### 3. ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°

```
1. WebSocket í´ë¼ì´ì–¸íŠ¸ ì—°ê²°
   â†“
2. ì„œë²„ ID ê¸°ë°˜ ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ ì‹œì‘
   â†“
3. Docker ì»¨í…Œì´ë„ˆ ë¡œê·¸ ì‹¤ì‹œê°„ ìˆ˜ì‹ 
   â†“
4. WebSocketìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì— ì „ì†¡
   â†“
5. ì—°ê²° ì¢…ë£Œ ì‹œ ìŠ¤íŠ¸ë¦¼ ì •ë¦¬
```

### 4. Panel ë™ê¸°í™” íë¦„

```
1. ì£¼ê¸°ì  ë˜ëŠ” ì´ë²¤íŠ¸ ê¸°ë°˜ ë™ê¸°í™” ì‹œì‘
   â†“
2. Docker ì»¨í…Œì´ë„ˆ ëª©ë¡ ìŠ¤ìº”
   â†“
3. ì„œë²„ ë””ë ‰í† ë¦¬ ìŠ¤ìº”
   â†“
4. ë™ê¸°í™” ë°ì´í„° ìƒì„±
   â†“
5. Panel APIë¡œ ìƒíƒœ ì „ì†¡ (POST /sync/wings-to-panel)
   â†“
6. Panelì—ì„œ DB ìƒíƒœ ì—…ë°ì´íŠ¸
```

---

## ğŸ”— ë°±ì—”ë“œ Panelê³¼ì˜ ì—°ë™

### 1. API í†µì‹ 

**Wings â†’ Panel**:
```javascript
// ë™ê¸°í™” ë°ì´í„° ì „ì†¡
POST http://panel:3001/sync/wings-to-panel
{
  "timestamp": "2025-01-17T...",
  "containers": [...],
  "directories": [...],
  "summary": { ... }
}
```

**Panel â†’ Wings**:
```javascript
// ì„œë²„ ì œì–´ ìš”ì²­
POST http://wings:8080/api/v1/servers/server-id/start
GET  http://wings:8080/api/v1/servers/server-id
DELETE http://wings:8080/api/v1/servers/server-id
```

### 2. ë°ì´í„° ë§¤í•‘

**Wings ì„œë²„ ì •ë³´ â†’ Panel DB**:
```javascript
Wings: {
  id: "generated-uuid",
  name: "My Server",
  status: "running",
  port: 25565,
  memory: "2g",
  cpu: "1.5"
}

Panel DB (SERVERS í…Œì´ë¸”): {
  id: "generated-uuid",
  name: "My Server", 
  wings_server_id: "generated-uuid",
  port: 25565,
  memory: "2g",
  cpus: "1.5",
  node_id: 1  // Wings ë…¸ë“œ ID
}
```

### 3. ìƒíƒœ ë™ê¸°í™”

**ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸**:
1. Wingsì—ì„œ ì»¨í…Œì´ë„ˆ ìƒíƒœ ë³€ê²½ ê°ì§€
2. Panelë¡œ ë™ê¸°í™” ë°ì´í„° ì „ì†¡
3. Panelì—ì„œ DB ì—…ë°ì´íŠ¸
4. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ìµœì‹  ìƒíƒœ ì¡°íšŒ

---

## âš™ï¸ í™˜ê²½ ì„¤ì •

### í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ (.env)

```bash
# ì„œë²„ ì„¤ì •
PORT=8080
NODE_ENV=development

# Docker ì„¤ì •
DOCKER_IMAGE=itzg/minecraft-server
DOCKER_SOCKET=/var/run/docker.sock

# ë§ˆì¸í¬ë˜í”„íŠ¸ ê¸°ë³¸ê°’
MC_DEFAULT_PORT=25565
MC_DEFAULT_MEMORY=1g
MC_DEFAULT_CPU=1.0
MC_DEFAULT_VERSION=latest
MC_DEFAULT_TYPE=PAPER

# ê²½ë¡œ ì„¤ì •
SERVER_DATA_BASE_PATH=/home/temmie/minecraft_server
DATA_MOUNT_PATH=/data

# ë¡œê¹…
LOG_LEVEL=info

# ë³´ì•ˆ
PORT_RANGE_MIN=25565
PORT_RANGE_MAX=25600
```

### Docker ìš”êµ¬ì‚¬í•­

```bash
# Docker ì„¤ì¹˜ í™•ì¸
docker --version

# Docker ë°ëª¬ ì‹¤í–‰ í™•ì¸
docker info

# ê¶Œí•œ ì„¤ì • (Linux)
sudo usermod -aG docker $USER
```

---

## ğŸ” ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

### ì„œë²„ ê´€ë¦¬
- `GET /api/v1/servers` - ëª¨ë“  ì„œë²„ ëª©ë¡
- `GET /api/v1/servers/:id` - ì„œë²„ ì •ë³´ ì¡°íšŒ
- `POST /api/v1/servers` - ì„œë²„ ìƒì„±
- `DELETE /api/v1/servers/:id` - ì„œë²„ ì‚­ì œ

### ì„œë²„ ì œì–´
- `POST /api/v1/servers/:id/start` - ì„œë²„ ì‹œì‘
- `POST /api/v1/servers/:id/stop` - ì„œë²„ ì¤‘ì§€
- `POST /api/v1/servers/:id/restart` - ì„œë²„ ì¬ì‹œì‘

### ë¦¬ì†ŒìŠ¤ ê´€ë¦¬
- `PUT /api/v1/servers/:id/resources` - ë¦¬ì†ŒìŠ¤ ì—…ë°ì´íŠ¸
- `GET /api/v1/servers/:id/status` - ìƒíƒœ ì¡°íšŒ

### ëª…ë ¹ì–´ ë° ë¡œê·¸
- `POST /api/v1/servers/:id/command` - ëª…ë ¹ì–´ ì „ì†¡
- `WebSocket /ws` - ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°

### í—¬ìŠ¤ì²´í¬
- `GET /ping` - Wings ë°ëª¬ ìƒíƒœ í™•ì¸

---

## ğŸš¨ ì£¼ìš” ê³ ë ¤ì‚¬í•­

### 1. ë³´ì•ˆ
- Docker ì†Œì¼“ ì ‘ê·¼ ê¶Œí•œ ê´€ë¦¬
- í¬íŠ¸ ë²”ìœ„ ì œí•œìœ¼ë¡œ ì¶©ëŒ ë°©ì§€
- ì…ë ¥ ê²€ì¦ìœ¼ë¡œ ì¸ì ì…˜ ê³µê²© ë°©ì§€
- ì»¨í…Œì´ë„ˆ ë¦¬ì†ŒìŠ¤ ì œí•œìœ¼ë¡œ ì‹œìŠ¤í…œ ë³´í˜¸

### 2. ì„±ëŠ¥
- ë©”ëª¨ë¦¬ ê¸°ë°˜ ì„œë²„ ìŠ¤í† ì–´ (í–¥í›„ Redis ê³ ë ¤)
- Docker API í˜¸ì¶œ ìµœì í™”
- WebSocket ì—°ê²° ê´€ë¦¬
- ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë° ë²„í¼ë§

### 3. ì•ˆì •ì„±
- Docker ë°ëª¬ ì—°ê²° ì‹¤íŒ¨ ì‹œ graceful shutdown
- ì»¨í…Œì´ë„ˆ ìƒì„± ì‹¤íŒ¨ ì‹œ ë¡¤ë°±
- WebSocket ì—°ê²° ëŠê¹€ ì²˜ë¦¬
- ì—ëŸ¬ ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§

### 4. í™•ì¥ì„±
- ë‹¤ì¤‘ ë…¸ë“œ ì§€ì› ê°€ëŠ¥í•œ êµ¬ì¡°
- í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜ ì„¤ì •ìœ¼ë¡œ ë°°í¬ ìœ ì—°ì„±
- ëª¨ë“ˆí™”ëœ êµ¬ì¡°ë¡œ ê¸°ëŠ¥ ì¶”ê°€ ìš©ì´
- Panelê³¼ì˜ ëŠìŠ¨í•œ ê²°í•©

---

## ğŸ“ ê°œë°œ ì‹œ ì°¸ê³ ì‚¬í•­

### 1. ìƒˆë¡œìš´ API ì¶”ê°€
1. `controllers/server.controller.js`ì— í•¸ë“¤ëŸ¬ ì¶”ê°€
2. `routes/server.routes.js`ì— ë¼ìš°íŠ¸ ì •ì˜
3. `services/docker.service.js`ì— Docker ë¡œì§ êµ¬í˜„
4. `utils/validationUtils.js`ì— ê²€ì¦ ë¡œì§ ì¶”ê°€

### 2. í™˜ê²½ë³€ìˆ˜ ì¶”ê°€
1. `config/config.js`ì— ì„¤ì • ì¶”ê°€
2. `.env.example`ì— ì˜ˆì‹œ ê°’ ì¶”ê°€
3. ê´€ë ¨ ì„œë¹„ìŠ¤ì—ì„œ config ì‚¬ìš©

### 3. ì—ëŸ¬ ì²˜ë¦¬ ì¶”ê°€
1. `utils/errorUtils.js`ì— ì»¤ìŠ¤í…€ ì—ëŸ¬ ì •ì˜
2. ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì ì ˆí•œ ì—ëŸ¬ ì‘ë‹µ ì‚¬ìš©
3. ë¡œê¹…ìœ¼ë¡œ ë””ë²„ê¹… ì •ë³´ ê¸°ë¡

### 4. WebSocket ì´ë²¤íŠ¸ ì¶”ê°€
1. `websocket/websocket.js`ì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€
2. í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ê´€ë¦¬ ë¡œì§ êµ¬í˜„
3. ì ì ˆí•œ ì—ëŸ¬ ì²˜ë¦¬ ë° ì •ë¦¬ ë¡œì§

---

## ğŸ”„ í–¥í›„ ê°œì„  ê³„íš

### 1. ë°ì´í„° ì˜ì†ì„±
- ë©”ëª¨ë¦¬ ìŠ¤í† ì–´ â†’ Redis/PostgreSQL ì „í™˜
- ì„œë²„ ì„¤ì • ë° ìƒíƒœ ì˜êµ¬ ì €ì¥
- ë°±ì—… ë° ë³µêµ¬ ê¸°ëŠ¥

### 2. ëª¨ë‹ˆí„°ë§ ê°•í™”
- ì„œë²„ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
- ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬ì¶•

### 3. ë³´ì•ˆ ê°•í™”
- API ì¸ì¦ í† í° ì‹œìŠ¤í…œ
- ì»¨í…Œì´ë„ˆ ë³´ì•ˆ ì •ì±… ê°•í™”
- ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬

### 4. ê¸°ëŠ¥ í™•ì¥
- ì„œë²„ ë°±ì—…/ë³µì› ê¸°ëŠ¥
- í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ ì‹œìŠ¤í…œ
- ë‹¤ì¤‘ ë²„ì „ ì§€ì› í™•ëŒ€

---

ì´ ë¬¸ì„œëŠ” Wings ë°ëª¬ì˜ í˜„ì¬ êµ¬ì¡°ì™€ ë°±ì—”ë“œ Panelê³¼ì˜ ì—°ë™ ë°©ì‹ì„ ì •í™•íˆ íŒŒì•…í•˜ê¸° ìœ„í•´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. 
ë¦¬íŒ©í† ë§ì´ë‚˜ ê¸°ëŠ¥ í™•ì¥ ì‹œ ì´ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°œì„ ì ì„ ì‹ë³„í•˜ê³  ì ìš©í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.